[gd_resource type="Shader" format=2]

[resource]

code = "shader_type canvas_item;

uniform sampler2D displacement;
uniform float displacementEffect = 0.1;
uniform float amplitude = 0.1;
uniform float speed = 0.2;

void fragment() {
	float speedTimed = TIME*speed;
    float actualAmplitude = amplitude/10.0;
    float addPos = ((texture(displacement,UV).b * displacementEffect - displacementEffect)/10.0 + (sin(UV.x*60.0+speedTimed) * actualAmplitude)) ;
    vec4 waterEffect = texture(TEXTURE,vec2(UV.x,UV.y + addPos));
	
    vec2 backDisplacment = (texture(displacement,UV-speedTimed/60.0).xy - texture(displacement,UV+speedTimed/60.0).xy) * displacementEffect * waterEffect.a;
    COLOR =  texture(SCREEN_TEXTURE,SCREEN_UV - backDisplacment) * waterEffect;
}"
_sections_unfolded = [ "Resource" ]

